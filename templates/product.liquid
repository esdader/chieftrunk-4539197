{% comment %} for some reason when I tried reordering the list it kept saving it in reverser.  Everything here is backwards {% endcomment %}
{% for product_link in collections.all-products.products %}
  {% if product_link.handle == product.handle %}
    {% if forloop.first %}
      {% assign curNum = forloop.index0 %}
      {% assign prevNum = curNum | plus: 1 %}
      {% assign nextNum = forloop.length | minus: 1 %}
      {% assign next_link = collections.all-products.products[nextNum].url %}
      {% assign prev_link = collections.all-products.products[prevNum].url %}
    {% elsif forloop.last %}
      {% assign curNum = forloop.index0 %}
      {% assign nextNum = curNum | minus: 1 %}
      {% assign next_link = collections.all-products.products[nextNum].url %}
      {% assign prev_link = collections.all-products.products[0].url %}
    {% else %}
      {% assign curNum = forloop.index0 %}
      {% assign prevNum = curNum | plus: 1 %}
      {% assign nextNum = curNum | minus: 1 %}
      {% assign next_link = collections.all-products.products[nextNum].url %}
      {% assign prev_link = collections.all-products.products[prevNum].url %}
    {% endif %}
  {% endif %}
{% endfor %}

<div class="container l-product-page clearfix">
    <article class="product-page">
      
      <section class="l-product-col product-info invisible">
        <header>
          <h1 class="product-name">{{ product.title }}</h1>
        </header>
        <p class="price">{{ product.price | money }}</p>
        <div class="product-description">
          {{ product.description }}
        </div> 
        <a href="/pages/products" class="shop-link">Back to Shop</a>
        <form action="/cart/add" method="post" enctype="multipart/form-data">
          <input type="hidden" id="{{ product.variants[0].id }}" name="id" value="{{ product.variants[0].id }}" />
            <input type="submit" name="add" id="add" class="add-to-cart-btn" value="Add to cart">
        </form>
          <div class="product-link-holder"><a href="{{ prev_link }}" class="product-link prev">&lt; Previous Product</a></div>
      </section>
      <img src="{{ product.featured_image | product_img_url: '1024x1024' }}" alt="{{ product.featured_image.alt | escape }}" data-giant-image="{{ product.featured_image | product_img_url: '2048x2048' }}" class="featured-img invisible">
      <div class="tool-tip ir">Click to view larger</div>
      <section class="l-product-col product-images invisible">
        {% for image in product.images %}
            <a href="{{ image | product_img_url: '1024x1024' }}" class="thmb-links" data-giant-image="{{ image | product_img_url: '2048x2048' }}"><img src="{{ image | product_img_url: 'small' }}" alt="{{ image.alt | escape }}"></a>
        {% endfor %}
        <div class="product-link-holder"><a href="{{ next_link }}" class="product-link next">Next Product &gt;</a></div>
      </section>  
    </article>
    
</div>
<div class="giant-image-holder">
  <img src="{{product.featured_image | product_img_url: pico}}">
  <div class="close-btn ir">Click to close</div>
</div>